{
  "full_name": "John Doe",
  "username": "johndoe",
  "email": "john@example.com",
  "password": "securepassword",
  "phone_number": "1234567890",
  "role": "user"
}

{
  "genre_id": 1,
  "name": "Mission Impossible",
  "trailer_url": "https://youtu.be/fsQgc9pCyDU?si=Sgl_lPFLhs44j3xg",
  "banner_image_url": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSafalx_eWYqtyL60gkiDE61XXeEmyeuRBf8g&s",
  "duration": "2h 28m",
  "rating": "8.8",
  "description": "A mind-bending thriller by Tom Cruise.",
  "language": "English",
  "country_of_origin": "USA"
}
{
  "venue_id": 2,
  "name": "Hall A",
  "type": "3D",
  "status": "active"
}
{
    "hall_id": 1,
    "movie_id": 2,
    "start_time": "2025-04-20T18:00:00Z"
}
{
    "hall_id": 7,
    "movie_id": 3,
    "start_time": "2025-04-20T18:00:00Z"
}
http://localhost:3000/api/bookings/create-booking
http://localhost:3000/api/movies/delete-movie/2


import React, { useState, useEffect } from 'react';
import axios from 'axios';

const AddShow = () => {
  console.log("üöÄ AddShow component rendered");

  const [movies, setMovies] = useState([]);
  const [halls, setHalls] = useState([]);
  const [startTime, setStartTime] = useState(''); // State for storing the start time

  useEffect(() => {
    console.log("üé• useEffect called in AddShow");

    const token = localStorage.getItem('token');  // Get token from localStorage
    console.log("Token:", token); // Log token for debugging

    // Fetch movies with token in headers
    axios.get('http://localhost:5000/api/movies/movies-names', {
      headers: {
        'Authorization': `Bearer ${token}` // Add token here
      }
    })
      .then(res => {
        console.log("‚úÖ Movies fetched:", res.data);
        if (res.data && Array.isArray(res.data)) {
          setMovies(res.data);
        } else {
          console.log("Movies data is not in the expected format.");
        }
      })
      .catch(err => {
        console.error("‚ùå Error fetching movies:", err);
      });

    // Fetch halls with token in headers
    axios.get('http://localhost:5000/api/venues/hall_id_and_name', {
      headers: {
        'Authorization': `Bearer ${token}` // Add token here
      }
    })
      .then(res => {
        console.log("‚úÖ Halls fetched:", res.data);
        if (res.data && Array.isArray(res.data)) {
          setHalls(res.data);
        } else {
          console.log("Halls data is not in the expected format.");
        }
      })
      .catch(err => {
        console.error("‚ùå Error fetching halls:", err);
      });
  }, []);

  const handleSubmit = () => {
    const token = localStorage.getItem('token');  // Get token from localStorage
    axios.put('http://localhost:5000/api/shows/add-show', {
      hall_id: document.getElementById('hallSelect').value,
      movie_id: document.getElementById('movieSelect').value,
      start_time: startTime,  // Pass the datetime here
    }, {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    })
      .then(response => {
        console.log("‚úÖ Show added successfully:", response.data);
      })
      .catch(error => {
        console.error("‚ùå Error adding show:", error);
      });
  };

  return (
    <div style={styles.container}>
      <h1 style={styles.heading}>Add Show</h1>

      <div style={styles.formGroup}>
        <label htmlFor="movieSelect" style={styles.label}>Select Movie</label>
        <select id="movieSelect" style={styles.select}>
          {movies.map(movie => (
            <option key={movie._id} value={movie._id}>
              {movie.name}
            </option>
          ))}
        </select>
      </div>

      <div style={styles.formGroup}>
        <label htmlFor="hallSelect" style={styles.label}>Select Hall</label>
        <select id="hallSelect" style={styles.select}>
          {halls.map(hall => (
            <option key={hall._id} value={hall._id}>
              {hall.name}
            </option>
          ))}
        </select>
      </div>

      <div style={styles.formGroup}>
        <label htmlFor="startTime" style={styles.label}>Select Show Start Time</label>
        <input
            id="startTime"
            type="datetime-local"
            style={styles.input}
            value={startTime} // store this state to hold the selected date-time
            onChange={(e) => setStartTime(e.target.value)} // set this state when input changes
        />
        </div>


      <div style={styles.buttonContainer}>
        <button style={styles.button} onClick={handleSubmit}>Add Show</button>
      </div>
    </div>
  );
};

// Styles for the component
const styles = {
  container: {
    maxWidth: '600px',
    margin: '50px auto',
    padding: '20px',
    backgroundColor: '#f9f9f9',
    borderRadius: '8px',
    boxShadow: '0 4px 8px rgba(0, 0, 0, 0.1)',
  },
  heading: {
    textAlign: 'center',
    marginBottom: '30px',
    color: '#333',
  },
  formGroup: {
    marginBottom: '20px',
  },
  label: {
    fontSize: '16px',
    fontWeight: 'bold',
    color: '#555',
    display: 'block',
    marginBottom: '8px',
  },
  select: {
    width: '100%',
    padding: '10px',
    fontSize: '16px',
    borderRadius: '4px',
    border: '1px solid #ddd',
    backgroundColor: '#fff',
    cursor: 'pointer',
  },
  buttonContainer: {
    textAlign: 'center',
  },
  button: {
    padding: '12px 25px',
    fontSize: '16px',
    backgroundColor: '#28a745',
    color: 'white',
    border: 'none',
    borderRadius: '5px',
    cursor: 'pointer',
    transition: 'background-color 0.3s',
  },
  buttonHover: {
    backgroundColor: '#218838',
  },
};

export default AddShow;
